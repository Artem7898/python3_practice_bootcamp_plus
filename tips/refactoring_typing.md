# Рефакторинг и типизация (практично)
## Идеи рефакторинга
- **Ясные имена** (data -> line_items, x -> count).
- **Малые функции** (до 20–30 строк), одна ответственность (SRP).
- **Ранние возвраты** вместо вложенных if.
- **Удаляй дубли**: DRY, выноси общие части.

## Типизация
- Добавляй типы сверху вниз: публичные функции → внутренности.
- Возвращай точные типы: `list[str]` вместо `list`.
- Протоколы/ABC используются, когда важны интерфейсы, а не конкретные классы.

## Тесты
- Держи примеры «нормальные/граничные/ошибочные».
- **Идемпотентность** и чистые функции тестировать проще.
- Property‑based тесты (Hypothesis) полезны на генераторах/парсерах.
